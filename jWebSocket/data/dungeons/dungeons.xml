<?xml version="1.0" encoding="UTF-8"?>
<dungeons>
    <dungeon id="generic" size="512" cells="32">
        <init>
            <![CDATA[    
	        ]]>
        </init>
        <build>
            <![CDATA[
                function squareSection(centerx, centery, depth, roomId) {
                    _digger_.setCurrentCell(centerx, centery, depth);
                    _digger_.createRoom(roomId);
                    
                    if (centerx > 0) {
                        _digger_.setCurrentCell(centerx - 1, centery, depth);
                        _digger_.createRoom(roomId);
                    }
                    
                    if (centerx < _dungeon_.numCellsPerSide() - 1) {
                        _digger_.setCurrentCell(centerx + 1, centery, depth);
                        _digger_.createRoom(roomId);
                    }
                    
                    if (centery > 0) {
                        _digger_.setCurrentCell(centerx, centery - 1, depth);
                        _digger_.createRoom(roomId);
                    }
                    
                    if (centery < _dungeon_.numCellsPerSide() - 1) {
                        _digger_.setCurrentCell(centerx, centery + 1, depth);
                        _digger_.createRoom(roomId);
                    }
                    
                    if (centerx > 0 && centery > 0) {
                        _digger_.setCurrentCell(centerx - 1, centery - 1, depth);
                        _digger_.createRoom(roomId);
                    }
                    
                    if (centerx < _dungeon_.numCellsPerSide() - 1 && centery < _dungeon_.numCellsPerSide() - 1) {
                        _digger_.setCurrentCell(centerx + 1, centery + 1, depth);
                        _digger_.createRoom(roomId);
                    }
                    
                    if (centerx > 0 && centery < _dungeon_.numCellsPerSide() - 1) {
                        _digger_.setCurrentCell(centerx - 1, centery + 1, depth);
                        _digger_.createRoom(roomId);
                    }
                    
                    if (centerx < _dungeon_.numCellsPerSide() - 1 && centery > 0) {
                        _digger_.setCurrentCell(centerx + 1, centery - 1, depth);
                        _digger_.createRoom(roomId);
                    }
                };    
            
                squareSection(_digger_.randomI(0, _dungeon_.numCellsPerSide()), _digger_.randomI(0, _dungeon_.numCellsPerSide()), _depth_, 'multiple');
                squareSection(_digger_.randomI(0, _dungeon_.numCellsPerSide()), _digger_.randomI(0, _dungeon_.numCellsPerSide()), _depth_, 'multiple');
                squareSection(_digger_.randomI(0, _dungeon_.numCellsPerSide()), _digger_.randomI(0, _dungeon_.numCellsPerSide()), _depth_, 'multiple');
                squareSection(_digger_.randomI(0, _dungeon_.numCellsPerSide()), _digger_.randomI(0, _dungeon_.numCellsPerSide()), _depth_, 'multiple');
                squareSection(_digger_.randomI(0, _dungeon_.numCellsPerSide()), _digger_.randomI(0, _dungeon_.numCellsPerSide()), _depth_, 'multiple');
                
                _digger_.setCurrentCell(0, 0, _depth_);
                _digger_.createRoom('bigroom00');
                _digger_.setCurrentCell(0, 1, _depth_);
                _digger_.createRoom('bigroom01');
                _digger_.setCurrentCell(1, 0, _depth_);
                _digger_.createRoom('bigroom10');
                _digger_.setCurrentCell(1, 1, _depth_);
                _digger_.createRoom('bigroom11');
                
                _digger_.setCurrentCell(0, 2, _depth_);
                _digger_.createRoom('square');
                
                _digger_.setCurrentCell(1, 2, _depth_);
                _digger_.createRoom('square');
                
                
                /*
	            _digger_.initCellsIterator(0);
	            while (_digger_.nextCell()) {
	                 var choose = _digger_.randomI(0, 2);
	                 if (choose == 0)
	                     _digger_.createRoom('square');
	            }
	            
	            _digger_.initCellsIterator(0);
	            while (_digger_.nextCell()) {
	                 if (_digger_.currentRoomId() == '') {
	                     var choose = _digger_.randomI(0, 2);
	                     if (choose == 0)
	                         _digger_.createRoom('cavern');
	                 }
	            }
	            
	            _digger_.initCellsIterator(0);
	            while (_digger_.nextCell()) {
	                 if (_digger_.currentRoomId() == '') {
	                     var choose = _digger_.randomI(0, 2);
	                     if (choose == 0)
	                         _digger_.createRoom('corridors');
	                 }
	            }
	            */
            ]]>
        </build>
    </dungeon>
</dungeons>